# バイト求人マッチングシステム 要件定義書
**/specifyコマンド実行用の簡潔版**

## システム概要
10万件のバイト求人から、1万人のユーザーそれぞれに最適な40件を毎日自動選定し、パーソナライズされたメール内容を生成するシステム。

## 主要機能

### 1. 求人データ処理
- 日次で10万件のCSVデータをインポート
- 3種類のスコアリング（基礎、SEO、パーソナライズ）
- 14のニーズカテゴリと12の職種カテゴリに自動分類

### 2. ユーザーマッチング
- 過去の応募履歴からユーザープロファイル生成
- 各ユーザーに最適な40件を選定
- 2週間以内に応募した企業は除外

### 3. メール生成（6セクション構成）
1. **編集部おすすめ** (5件) - fee×応募クリック数の上位
2. **あなたにおすすめTOP5** (5件) - パーソナライズスコア上位
3. **地域別求人** (10件) - 都道府県内＋職種マッチング
4. **近隣求人** (8件) - 市区町村周辺
5. **高収入・日払い** (7件) - エリア平均1.2倍以上 OR 日払い可
6. **新着求人** (5件) - 7日以内投稿

### 4. SQLモニタリング
- Next.jsでリアルタイムクエリ実行画面
- データ可視化ダッシュボード
- エラーログビューア

## 技術要件

### 必須要件
- **言語**: Python 3.11+ (バッチ処理), TypeScript (Frontend)
- **データベース**: Supabase (PostgreSQL)
- **フレームワーク**: FastAPI, Next.js 14
- **処理時間**: 30分以内で全処理完了
- **メモリ**: 4GB以内

### データモデル
- 20テーブル構成（詳細はER図参照）
- 主要テーブル：jobs, users, user_actions, user_profiles, daily_email_queue
- 日次40万件のマッチング結果を処理

## ユーザーストーリー
**求職者として**、毎朝6時に自分の応募履歴や居住地に基づいてパーソナライズされた40件のバイト求人情報をメールで受け取りたい。

**システム管理者として**、SQLクエリでリアルタイムにデータを確認し、処理状況を監視したい。

## 成功基準
- 毎日1万人への配信準備が6時までに完了
- 応募率が従来比150%向上
- システムエラー率1%未満

## 制約事項
- メール送信機能は含まない（配信準備まで）
- テストデータは/data/sample_job_data.csv使用
- 日次更新処理はコメントアウト（開発環境のため）

---

## 関連ドキュメント
- **データモデル**: 20250904_er_complete_v2.0.mmd
- **詳細仕様**: system_spec_v3.0.md（参考用）
- **実装詳細**: answers.md（開発時参照）