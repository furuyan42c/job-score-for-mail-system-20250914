# 📋 タスクファイル分割提案

**作成日**: 2025-09-20
**目的**: 1519行のtasks.mdを管理しやすくする

## 🎯 現状の問題

1. **ファイルが長すぎる** - 1519行は管理が困難
2. **フォーマット混在** - 新旧フォーマットが混在（11/96タスクのみ新）
3. **スクロール地獄** - 目的のタスクを探すのが大変
4. **更新が困難** - 大きなファイルは編集ミスが起きやすい

## 📁 提案: グループ別分割

### ファイル構造
```
specs/002-think-hard-ultrathink/
├── tasks.md                    # メインダッシュボード（現在の進捗サマリーのみ）
├── tasks/
│   ├── A-infrastructure.md     # Group A: インフラ（T001-T015）
│   ├── B-core-implementation.md # Group B: コア実装（T016-T045）
│   ├── C-integration.md        # Group C: 統合（T046-T074）
│   ├── D-testing.md            # Group D: テスト（T075-T085）
│   └── E-production.md         # Group E: 本番（T086-T096）
└── scripts/
    ├── update_task_progress.py  # 全ファイルから進捗集計
    └── check_task_files.py      # ファイル存在確認
```

### メインファイル（tasks.md）の内容
```markdown
# タスクリスト: バイト求人マッチングシステム

## 📊 タスク進捗ダッシュボード

| Group | ファイル | タスク数 | 完了 | 進行中 | 未着手 | 進捗% | 品質% |
|-------|----------|---------|------|--------|---------|-------|-------|
| A: インフラ | [tasks/A-infrastructure.md](tasks/A-infrastructure.md) | 15 | 13 | 0 | 2 | 87% | 90% |
| B: コア実装 | [tasks/B-core-implementation.md](tasks/B-core-implementation.md) | 30 | 9 | 4 | 17 | 43% | 75% |
| C: 統合 | [tasks/C-integration.md](tasks/C-integration.md) | 29 | 0 | 0 | 29 | 0% | 0% |
| D: テスト | [tasks/D-testing.md](tasks/D-testing.md) | 11 | 0 | 0 | 11 | 0% | 0% |
| E: 本番 | [tasks/E-production.md](tasks/E-production.md) | 11 | 0 | 0 | 11 | 0% | 0% |
| **合計** | | **96** | **22** | **4** | **70** | **23%** | **73%** |

## 🔴 現在のブロッカー
- T021: パフォーマンス問題が下流タスクをブロック
- T039: セキュリティ設計待ち

## 📈 今週の優先タスク
1. T021: パフォーマンス改善（REFACTORフェーズ）
2. T022-T024: ブロック解除後に着手
3. T005-T013: 契約テストの新フォーマット変換
```

## 💡 メリット

1. **ファイルサイズ削減**
   - 各ファイル300行程度に
   - 編集が高速化

2. **並列作業可能**
   - 複数人が異なるグループを同時編集
   - コンフリクト削減

3. **検索性向上**
   - グループ別に整理
   - 目的のタスクを素早く発見

4. **メンテナンス性**
   - 部分的な更新が容易
   - エラー影響範囲を限定

## 🔧 移行手順

### Phase 1: ディレクトリ作成
```bash
mkdir -p specs/002-think-hard-ultrathink/tasks
```

### Phase 2: グループ別ファイル作成
```bash
# 各グループのタスクを抽出して個別ファイルに保存
python3 scripts/split_tasks.py
```

### Phase 3: スクリプト更新
```python
# update_task_progress.py を更新
# tasks/*.md から進捗を集計するように変更
```

### Phase 4: 検証
```bash
# 全タスクが正しく分割されたか確認
python3 scripts/verify_split.py
```

## 📊 即効性のある改善案（分割前でも可能）

### 1. 優先タスクのみ新フォーマット化
現在作業中のタスク（T005-T030）だけを新フォーマットに変換

### 2. インデックス追加
ファイル冒頭にタスク番号のクイックリンクを追加

### 3. 折りたたみセクション
Markdownの詳細タグを使用してセクションを折りたたみ可能に

```markdown
<details>
<summary>Group A: インフラ [87%完了]</summary>

タスク詳細...

</details>
```

## 🎯 推奨アクション

### 短期的改善（今すぐ実施）
1. ダッシュボードの修正 ✅完了
2. 現在作業中のタスク（T021周辺）を新フォーマットに
3. ブロッカーセクションを目立たせる

### 中期的改善（今週中）
1. 全タスクを新フォーマットに段階的移行
2. グループ別ファイル分割の実施

### 長期的改善（次スプリント）
1. タスク管理ツール（Jira等）への移行検討
2. 自動進捗レポート生成システム構築

---

このような分割により、tasks.mdが格段に管理しやすくなります。