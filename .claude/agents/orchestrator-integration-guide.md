# Agent-Orchestrator çµ±åˆã‚·ã‚¹ãƒ†ãƒ ä½¿ç”¨ã‚¬ã‚¤ãƒ‰

## ğŸ¯ **æ¦‚è¦**

Agent-OrchestratorãŒè‡ªå‹•çš„ã«Agent-Orchestrator-Directorã¨Expert Consultationã‚’è¦è«‹ã§ãã‚‹çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã®ä½¿ç”¨æ–¹æ³•ã€‚

## ğŸ—ï¸ **ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ**

```
Agent-Orchestrator (Master)
â”œâ”€â”€ é€šå¸¸ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†
â”‚   â”œâ”€â”€ thorough-todo-executor
â”‚   â”œâ”€â”€ supabase-specialist
â”‚   â”œâ”€â”€ batch-performance-optimizer
â”‚   â””â”€â”€ data-quality-guardian
â”‚
â”œâ”€â”€ æˆ¦ç•¥çš„ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ agent-orchestrator-director (æˆ¦ç•¥ãƒ»å“è³ªç›£è¦–)
â”‚   â””â”€â”€ expert-consultation (å°‚é–€çŸ¥è­˜)
â”‚
â””â”€â”€ è‡ªå‹•åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ 
    â”œâ”€â”€ ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ¡ä»¶åˆ¤å®š
    â”œâ”€â”€ Task toolè‡ªå‹•å®Ÿè¡Œ
    â””â”€â”€ çµ±åˆæ„æ€æ±ºå®š
```

## âš¡ **è‡ªå‹•ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ¡ä»¶**

### Agent-Orchestrator-Director ã¸ã®ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

| æ¡ä»¶ | é–¾å€¤/æ¡ä»¶ | ä¾‹ |
|------|-----------|-----|
| **å“è³ªã‚¹ã‚³ã‚¢ä½ä¸‹** | < 0.8 | ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸65% |
| **KPIæ€§èƒ½åŠ£åŒ–** | `kpi_trend == 'declining'` | ãƒãƒƒãƒå‡¦ç†æ™‚é–“90åˆ†â†’120åˆ† |
| **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æºå•é¡Œ** | 3ã¤ä»¥ä¸Šã®ç«¶åˆ | Gitç«¶åˆ+ãƒªã‚½ãƒ¼ã‚¹ç«¶åˆ+ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç«¶åˆ |
| **ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†è©•ä¾¡** | `phase_completion == True` | Phase 2å®Œäº†æ™‚ã®ç·åˆè©•ä¾¡ |
| **ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³å±é™º** | `milestone_risk_level` HIGH/CRITICAL | 1æ™‚é–“ç›®æ¨™90åˆ†è¶…éãƒªã‚¹ã‚¯ |

### Expert Consultation ã¸ã®è¦è«‹

| æ¡ä»¶ | åˆ¤å®šåŸºæº– | ä¾‹ |
|------|----------|-----|
| **æŠ€è¡“çš„è¤‡é›‘åº¦** | HIGH/CRITICAL ãƒ¬ãƒ™ãƒ« | åˆ†æ•£å‡¦ç†ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ |
| **çŸ¥è­˜ã‚®ãƒ£ãƒƒãƒ—** | çŸ¥è­˜ä¸è¶³é ˜åŸŸã®ç‰¹å®š | é«˜åº¦ãªPostgreSQLæœ€é©åŒ– |
| **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š** | é‡è¦ãªè¨­è¨ˆåˆ¤æ–­ | ãƒ‡ãƒ¼ã‚¿ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æˆ¦ç•¥ |
| **æ€§èƒ½æœ€é©åŒ–** | å°‚é–€çš„ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚° | Supabase Edge Functionsæœ€é©åŒ– |
| **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œ** | HIGH/CRITICAL è„†å¼±æ€§ | RLS policyè¨­è¨ˆ |

## ğŸš€ **å®Ÿéš›ã®ä½¿ç”¨ä¾‹**

### ä¾‹1: ãƒ•ã‚§ãƒ¼ã‚º2å®Œäº†æ™‚ã®è‡ªå‹•è©•ä¾¡

```bash
# Agent-Orchestratorã§ã®å®Ÿè¡Œ
/agent agent-orchestrator "Phase 2ã®ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸã€‚å…¨ä½“è©•ä¾¡ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚"
```

**å†…éƒ¨å‹•ä½œ:**
1. Agent-OrchestratorãŒå“è³ªã‚¹ã‚³ã‚¢0.75ã‚’æ¤œå‡ºï¼ˆ< 0.8ï¼‰
2. `should_escalate_to_director()` ãŒ `True` ã‚’è¿”ã™
3. è‡ªå‹•çš„ã«Agent-Orchestrator-Directorã‚’å‘¼ã³å‡ºã—
4. æˆ¦ç•¥çš„è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆã‚’å–å¾—
5. æ”¹å–„æ¨å¥¨äº‹é …ã‚’çµ±åˆã—ãŸç·åˆå›ç­”ã‚’æä¾›

### ä¾‹2: è¤‡é›‘ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ

```bash
# Agent-Orchestratorã§ã®å®Ÿè¡Œ
/agent agent-orchestrator "1æ™‚é–“ãƒãƒƒãƒå‡¦ç†ç›®æ¨™ãŒå›°é›£ã§ã™ã€‚ç¾åœ¨90åˆ†ã‹ã‹ã£ã¦ãŠã‚Šã€æœ€é©åŒ–ãŒå¿…è¦ã§ã™ã€‚"
```

**å†…éƒ¨å‹•ä½œ:**
1. Agent-OrchestratorãŒè¤‡é›‘æ€§ãƒ¬ãƒ™ãƒ«HIGHã€çŸ¥è­˜ã‚®ãƒ£ãƒƒãƒ—ã‚’æ¤œå‡º
2. `should_request_expert_consultation()` ãŒ `True` ã‚’è¿”ã™
3. è‡ªå‹•çš„ã«Expert Consultationã‚’è¦è«‹
4. å°‚é–€çš„ãªæœ€é©åŒ–æˆ¦ç•¥ã‚’å–å¾—
5. å®Ÿè¡Œå¯èƒ½ãªæ”¹å–„è¨ˆç”»ã‚’æç¤º

### ä¾‹3: è¤‡åˆçš„å•é¡Œï¼ˆæˆ¦ç•¥+å°‚é–€ä¸¡æ–¹ï¼‰

```bash
# Agent-Orchestratorã§ã®å®Ÿè¡Œ
/agent agent-orchestrator "å“è³ªå•é¡Œã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡ŒãŒåŒæ™‚ç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è¦‹ç›´ã—ãŒå¿…è¦ã§ã™ã€‚"
```

**å†…éƒ¨å‹•ä½œ:**
1. æˆ¦ç•¥çš„ç›£è¦–ãŒå¿…è¦ â†’ Agent-Orchestrator-Directorå‘¼ã³å‡ºã—
2. DirectorãŒå°‚é–€çŸ¥è­˜ã‚‚å¿…è¦ã¨åˆ¤æ–­ â†’ Expert Consultationæ¨å¥¨
3. ä¸¡æ–¹ã®åˆ†æã‚’çµ±åˆã—ãŸåŒ…æ‹¬çš„è§£æ±ºç­–ã‚’æç¤º

## ğŸ“‹ **å®Ÿè·µçš„ãªä½¿ç”¨ã‚·ãƒŠãƒªã‚ª**

### Phase 1å®Œäº†æ™‚
```bash
/agent agent-orchestrator "Phase 1ã®å…¨ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸã€‚æ¬¡ã®Phaseã«é€²ã‚€å‰ã«åŒ…æ‹¬çš„ãªè©•ä¾¡ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
```

### æ€§èƒ½å•é¡Œç™ºç”Ÿæ™‚
```bash
/agent agent-orchestrator "ãƒãƒƒãƒå‡¦ç†ãŒ60åˆ†ç›®æ¨™ã‚’å¤§å¹…ã«è¶…éã—ã¦ã„ã¾ã™ã€‚æ ¹æœ¬çš„ãªæ”¹å–„ãŒå¿…è¦ã§ã™ã€‚"
```

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ç«¶åˆæ™‚
```bash
/agent agent-orchestrator "è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ãƒªã‚½ãƒ¼ã‚¹ç«¶åˆãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚èª¿æ•´æˆ¦ç•¥ã‚’ç«‹ã¦ã¦ãã ã•ã„ã€‚"
```

### æŠ€è¡“çš„èª²é¡Œæ™‚
```bash
/agent agent-orchestrator "Supabaseã®é«˜åº¦ãªæœ€é©åŒ–ãŒå¿…è¦ã§ã™ãŒã€ç¾åœ¨ã®çŸ¥è­˜ã§ã¯é™ç•ŒãŒã‚ã‚Šã¾ã™ã€‚"
```

## ğŸ”§ **ã‚·ã‚¹ãƒ†ãƒ ã®åˆ©ç‚¹**

### 1. **è‡ªå‹•åˆ¤æ–­**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡ç¤ºã™ã‚‹å¿…è¦ãªã—
- Agent-OrchestratorãŒçŠ¶æ³ã‚’åˆ†æã—ã¦é©åˆ‡ãªæˆ¦ç•¥ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è‡ªå‹•é¸æŠ

### 2. **çµ±åˆã•ã‚ŒãŸå›ç­”**
- è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰ã®æƒ…å ±ã‚’çµ±åˆ
- ä¸€è²«æ€§ã®ã‚ã‚‹åŒ…æ‹¬çš„ãªè§£æ±ºç­–ã‚’æä¾›

### 3. **åŠ¹ç‡æ€§**
- å˜ä¸€ã®Agent-Orchestratorã¸ã®æŒ‡ç¤ºã§è¤‡é›‘ãªåˆ†æãŒå¯èƒ½
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®æ‰‹å‹•é€£æºãŒä¸è¦

### 4. **å“è³ªä¿è¨¼**
- è‡ªå‹•çš„ãªå“è³ªãƒã‚§ãƒƒã‚¯ã¨KPIç›£è¦–
- å•é¡Œã®æ—©æœŸç™ºè¦‹ã¨å¯¾å¿œ

## ğŸ’¡ **ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**

### 1. **æ˜ç¢ºãªçŠ¶æ³èª¬æ˜**
Agent-Orchestratorã«ç¾åœ¨ã®çŠ¶æ³ã‚’è©³ã—ãèª¬æ˜ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šé©åˆ‡ãªåˆ¤æ–­ãŒå¯èƒ½ã€‚

### 2. **å®šæœŸçš„ãªè©•ä¾¡**
ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚ã‚„ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³æ™‚ã«å®šæœŸçš„ãªè©•ä¾¡ã‚’å®Ÿæ–½ã€‚

### 3. **æ—©æœŸã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
å•é¡ŒãŒè¤‡é›‘åŒ–ã™ã‚‹å‰ã« Agent-Orchestrator ã«ç›¸è«‡ã€‚

### 4. **çµ±åˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**
å€‹åˆ¥ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ˆã‚Šã‚‚Agent-Orchestratorã‚’é€šã—ãŸçµ±åˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å„ªå…ˆã€‚

ã“ã®çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã®åŠ¹ç‡æ€§ã¨å“è³ªãŒå¤§å¹…ã«å‘ä¸Šã—ã¾ã™ã€‚
