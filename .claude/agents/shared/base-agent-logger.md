# BaseAgentLogger - ÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂÖ±ÈÄö„É≠„Ç∞Âü∫Áõ§„ÇØ„É©„Çπ

**„ÇØ„É©„Çπ„Çø„Ç§„Éó**: `shared-component`
**‰∏ªË¶ÅË≤¨Âãô**: ÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„ÉàÁµ±‰∏Ä„É≠„Ç∞„Ç∑„Çπ„ÉÜ„É†„ÉªÊßãÈÄ†Âåñ„É≠„Ç∞„Éª„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ
**‰ΩúÊàêÊó•ÊôÇ**: 2025-08-25
**„Éê„Éº„Ç∏„Éß„É≥**: 1.0.0

## üìã **Âü∫Áõ§„ÇØ„É©„ÇπÊ¶ÇË¶Å**

BaseAgentLogger„ÅØ„ÄÅÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅåÁ∂ôÊâø„Åô„ÇãÁµ±‰∏Ä„É≠„Ç∞Âü∫Áõ§„ÇØ„É©„Çπ„Åß„Åô„ÄÇÊßãÈÄ†Âåñ„É≠„Ç∞„Éª„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ„Éª„Ç®„É©„Éº„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„Éª„É≠„Ç∞„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥Ê©üËÉΩ„ÇíÊèê‰æõ„Åó„ÄÅ„Ç∑„Çπ„ÉÜ„É†ÂÖ®‰Ωì„ÅÆ‰∏ÄË≤´„Åó„Åü„É≠„Ç∞ÁÆ°ÁêÜ„ÇíÂÆüÁèæ„Åó„Åæ„Åô„ÄÇ

### **„Ç≥„Ç¢Ê©üËÉΩ**
- **Áµ±‰∏Ä„É≠„Ç∞„Éá„Ç£„É¨„ÇØ„Éà„É™ÁÆ°ÁêÜ**: „Ç®„Éº„Ç∏„Çß„É≥„ÉàÂà•„ÅÆÊ®ôÊ∫ñÂåñ„Åï„Çå„Åü„É≠„Ç∞ÊßãÈÄ†
- **ÊßãÈÄ†Âåñ„É≠„Ç∞Âá∫Âäõ**: JSONÂΩ¢Âºè„Åß„ÅÆ‰∏ÄË≤´„Åó„ÅüÂàÜÊûêÂèØËÉΩ„É≠„Ç∞
- **„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ**: ÂÆüË°åÊôÇÈñì„Éª„É™„ÇΩ„Éº„Çπ‰ΩøÁî®Èáè„ÅÆËá™ÂãïËøΩË∑°
- **„Ç®„É©„ÉºÂàÜÈ°û„ÉªËøΩË∑°**: ÈáçË¶ÅÂ∫¶Âà•„Ç®„É©„ÉºÁÆ°ÁêÜ„Éª„Çπ„Çø„ÉÉ„ÇØ„Éà„É¨„Éº„Çπ‰øùÂ≠ò
- **„É≠„Ç∞„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥**: Ëá™Âãï„Éï„Ç°„Ç§„É´ÁÆ°ÁêÜ„ÉªÂÆπÈáèÂà∂Âæ°
- **Áµ±ÂêàÁõ£Ë¶ñÊîØÊè¥**: ÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„Éà„É≠„Ç∞„ÅÆÁµ±ÂêàÂàÜÊûêÊ©üËÉΩ

## üîß **BaseAgentLoggerÂÆüË£Ö**

### **Âü∫Áõ§„ÇØ„É©„ÇπÂÆöÁæ©**
```python
import os
import json
import datetime
from typing import Dict, List, Any, Optional
from dataclasses import dataclass, asdict
from enum import Enum
import traceback
import threading
from pathlib import Path

class LogLevel(Enum):
    DEBUG = "DEBUG"
    INFO = "INFO"
    WARNING = "WARNING"
    ERROR = "ERROR"
    CRITICAL = "CRITICAL"

class ErrorSeverity(Enum):
    LOW = 1
    MEDIUM = 2
    HIGH = 3
    CRITICAL = 4

@dataclass
class LogEntry:
    """ÊßãÈÄ†Âåñ„É≠„Ç∞„Ç®„É≥„Éà„É™„ÉºÊ®ôÊ∫ñ„Éï„Ç©„Éº„Éû„ÉÉ„Éà"""
    timestamp: str
    agent_name: str
    log_level: str
    event_type: str
    category: str
    message: str
    event_data: Dict[str, Any]
    metadata: Dict[str, Any]
    correlation_id: Optional[str] = None
    execution_context: Optional[Dict[str, Any]] = None

@dataclass
class PerformanceMetric:
    """„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„É°„Éà„É™„ÇØ„ÇπÊ®ôÊ∫ñ„Éï„Ç©„Éº„Éû„ÉÉ„Éà"""
    timestamp: str
    agent_name: str
    metric_name: str
    metric_value: float
    measurement_unit: str
    context: Dict[str, Any]
    execution_id: Optional[str] = None

@dataclass
class ErrorReport:
    """„Ç®„É©„Éº„É¨„Éù„Éº„ÉàÊ®ôÊ∫ñ„Éï„Ç©„Éº„Éû„ÉÉ„Éà"""
    timestamp: str
    agent_name: str
    error_type: str
    error_message: str
    severity: str
    context: Dict[str, Any]
    stack_trace: Optional[str] = None
    recovery_action: Optional[str] = None
    error_id: Optional[str] = None

class BaseAgentLogger:
    """ÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂÖ±ÈÄö„É≠„Ç∞Âü∫Áõ§„ÇØ„É©„Çπ"""

    def __init__(self, agent_name: str):
        self.agent_name = agent_name
        self.log_base_path = "/Users/furuyanaoki/Project/claude-code-mailsocre-app/logs"
        self.session_id = self.generate_session_id()
        self.correlation_id = None
        self.lock = threading.Lock()

        # „É≠„Ç∞Ë®≠ÂÆö
        self.max_log_file_size = 10 * 1024 * 1024  # 10MB
        self.max_log_files = 30  # 30Êó•ÂàÜ
        self.flush_interval = 5  # 5Áßí

        self.setup_agent_log_directories()
        self.initialize_log_rotation()

    def setup_agent_log_directories(self):
        """„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂ∞ÇÁî®„É≠„Ç∞„Éá„Ç£„É¨„ÇØ„Éà„É™„ÅÆË®≠ÂÆö"""

        # Ê®ôÊ∫ñ„Éá„Ç£„É¨„ÇØ„Éà„É™ÊßãÈÄ†
        standard_dirs = [
            f"{self.log_base_path}/{self.agent_name}/",
            f"{self.log_base_path}/{self.agent_name}/execution/",
            f"{self.log_base_path}/{self.agent_name}/errors/",
            f"{self.log_base_path}/{self.agent_name}/performance/",
            f"{self.log_base_path}/{self.agent_name}/summary/",
            f"{self.log_base_path}/{self.agent_name}/debug/"
        ]

        # „Ç®„Éº„Ç∏„Çß„É≥„ÉàÁâπÂåñ„Éá„Ç£„É¨„ÇØ„Éà„É™
        agent_specific_dirs = self.get_agent_specific_directories()
        all_dirs = standard_dirs + agent_specific_dirs

        for log_dir in all_dirs:
            Path(log_dir).mkdir(parents=True, exist_ok=True)

    def get_agent_specific_directories(self) -> List[str]:
        """„Ç®„Éº„Ç∏„Çß„É≥„ÉàÁâπÂåñ„Éá„Ç£„É¨„ÇØ„Éà„É™„ÅÆÂÆöÁæ©Ôºà„Çµ„Éñ„ÇØ„É©„Çπ„ÅßÂÆüË£ÖÔºâ"""
        return []

    def generate_session_id(self) -> str:
        """„Çª„ÉÉ„Ç∑„Éß„É≥IDÁîüÊàê"""
        return f"{self.agent_name}_{datetime.datetime.now().strftime('%Y%m%d_%H%M%S')}_{os.getpid()}"

    def set_correlation_id(self, correlation_id: str):
        """Áõ∏Èñ¢IDË®≠ÂÆöÔºà„Ç®„Éº„Ç∏„Çß„É≥„ÉàÈñìÈÄ£Êê∫ËøΩË∑°Áî®Ôºâ"""
        self.correlation_id = correlation_id

    def log_structured_event(self, log_level: LogLevel, category: str, event_type: str,
                           message: str, event_data: Dict[str, Any] = None,
                           execution_context: Dict[str, Any] = None):
        """ÊßãÈÄ†Âåñ„Ç§„Éô„É≥„Éà„É≠„Ç∞ÔºàÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂÖ±ÈÄöÔºâ"""

        if event_data is None:
            event_data = {}

        log_entry = LogEntry(
            timestamp=datetime.datetime.now().isoformat(),
            agent_name=self.agent_name,
            log_level=log_level.value,
            event_type=event_type,
            category=category,
            message=message,
            event_data=event_data,
            metadata={
                "log_version": "1.0",
                "session_id": self.session_id,
                "environment": os.getenv("ENVIRONMENT", "development"),
                "process_id": os.getpid()
            },
            correlation_id=self.correlation_id,
            execution_context=execution_context
        )

        self._write_structured_log(category, log_entry)

        # „Ç≥„É≥„ÇΩ„Éº„É´Âá∫ÂäõÔºàDEBUG„É¨„Éô„É´‰ª•Â§ñÔºâ
        if log_level != LogLevel.DEBUG:
            self._write_console_log(log_entry)

    def log_performance_metric(self, metric_name: str, metric_value: float,
                              context: Dict[str, Any] = None, execution_id: str = None):
        """„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„É°„Éà„É™„ÇØ„Çπ„É≠„Ç∞ÔºàÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂÖ±ÈÄöÔºâ"""

        if context is None:
            context = {}

        performance_metric = PerformanceMetric(
            timestamp=datetime.datetime.now().isoformat(),
            agent_name=self.agent_name,
            metric_name=metric_name,
            metric_value=metric_value,
            measurement_unit=self.get_metric_unit(metric_name),
            context=context,
            execution_id=execution_id or self.session_id
        )

        self._write_performance_log(performance_metric)

    def log_error_with_context(self, error_type: str, error_message: str,
                              context: Dict[str, Any] = None, stack_trace: str = None,
                              recovery_action: str = None):
        """„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà‰ªò„Åç„Ç®„É©„Éº„É≠„Ç∞ÔºàÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„ÉàÂÖ±ÈÄöÔºâ"""

        if context is None:
            context = {}

        if stack_trace is None:
            stack_trace = traceback.format_exc()

        error_severity = self.determine_error_severity(error_type)

        error_report = ErrorReport(
            timestamp=datetime.datetime.now().isoformat(),
            agent_name=self.agent_name,
            error_type=error_type,
            error_message=error_message,
            severity=error_severity.name,
            context=context,
            stack_trace=stack_trace,
            recovery_action=recovery_action,
            error_id=self.generate_error_id()
        )

        self._write_error_log(error_report)

        # ÈáçË¶Å„Å™„Ç®„É©„Éº„ÅØÂç≥Â∫ß„Å´„Ç¢„É©„Éº„Éà
        if error_severity in [ErrorSeverity.HIGH, ErrorSeverity.CRITICAL]:
            self._trigger_error_alert(error_report)

    def log_execution_start(self, operation_name: str, parameters: Dict[str, Any] = None):
        """Êìç‰ΩúÈñãÂßã„É≠„Ç∞"""

        execution_context = {
            "operation_name": operation_name,
            "parameters": parameters or {},
            "start_time": datetime.datetime.now().isoformat(),
            "execution_id": self.generate_execution_id()
        }

        self.log_structured_event(
            LogLevel.INFO,
            "execution",
            "OPERATION_START",
            f"Starting operation: {operation_name}",
            event_data=execution_context,
            execution_context=execution_context
        )

        return execution_context["execution_id"]

    def log_execution_end(self, execution_id: str, operation_name: str,
                         success: bool, result: Dict[str, Any] = None,
                         execution_time_seconds: float = None):
        """Êìç‰ΩúÁµÇ‰∫Ü„É≠„Ç∞"""

        execution_context = {
            "operation_name": operation_name,
            "execution_id": execution_id,
            "success": success,
            "result": result or {},
            "end_time": datetime.datetime.now().isoformat(),
            "execution_time_seconds": execution_time_seconds
        }

        log_level = LogLevel.INFO if success else LogLevel.ERROR
        event_type = "OPERATION_SUCCESS" if success else "OPERATION_FAILURE"

        self.log_structured_event(
            log_level,
            "execution",
            event_type,
            f"Operation {operation_name} {'completed successfully' if success else 'failed'}",
            event_data=execution_context,
            execution_context=execution_context
        )

        # „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„É°„Éà„É™„ÇØ„ÇπË®òÈå≤
        if execution_time_seconds is not None:
            self.log_performance_metric(
                f"{operation_name}_execution_time",
                execution_time_seconds,
                context={"success": success, "operation": operation_name},
                execution_id=execution_id
            )

    def _write_structured_log(self, category: str, log_entry: LogEntry):
        """ÊßãÈÄ†Âåñ„É≠„Ç∞„ÅÆÊõ∏„ÅçËæº„Åø"""

        with self.lock:
            try:
                date_str = datetime.datetime.now().strftime("%Y-%m-%d")
                log_file_path = f"{self.log_base_path}/{self.agent_name}/{category}/{date_str}-{category}.log"

                # „É≠„Ç∞„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥„ÉÅ„Çß„ÉÉ„ÇØ
                self._check_log_rotation(log_file_path)

                with open(log_file_path, "a", encoding="utf-8") as log_file:
                    json.dump(asdict(log_entry), log_file, ensure_ascii=False, separators=(',', ':'))
                    log_file.write("\n")

            except Exception as e:
                print(f"Failed to write structured log: {str(e)}")

    def _write_performance_log(self, metric: PerformanceMetric):
        """„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„É≠„Ç∞„ÅÆÊõ∏„ÅçËæº„Åø"""

        with self.lock:
            try:
                date_str = datetime.datetime.now().strftime("%Y-%m-%d")
                log_file_path = f"{self.log_base_path}/{self.agent_name}/performance/{date_str}-performance.log"

                with open(log_file_path, "a", encoding="utf-8") as log_file:
                    json.dump(asdict(metric), log_file, ensure_ascii=False, separators=(',', ':'))
                    log_file.write("\n")

            except Exception as e:
                print(f"Failed to write performance log: {str(e)}")

    def _write_error_log(self, error_report: ErrorReport):
        """„Ç®„É©„Éº„É≠„Ç∞„ÅÆÊõ∏„ÅçËæº„Åø"""

        with self.lock:
            try:
                date_str = datetime.datetime.now().strftime("%Y-%m-%d")
                log_file_path = f"{self.log_base_path}/{self.agent_name}/errors/{date_str}-errors.log"

                with open(log_file_path, "a", encoding="utf-8") as log_file:
                    json.dump(asdict(error_report), log_file, ensure_ascii=False, separators=(',', ':'))
                    log_file.write("\n")

            except Exception as e:
                print(f"Failed to write error log: {str(e)}")

    def _write_console_log(self, log_entry: LogEntry):
        """„Ç≥„É≥„ÇΩ„Éº„É´„É≠„Ç∞Âá∫Âäõ"""

        console_message = f"[{log_entry.timestamp}] {log_entry.agent_name} {log_entry.log_level}: {log_entry.message}"

        if log_entry.log_level in ["ERROR", "CRITICAL"]:
            print(f"\033[91m{console_message}\033[0m")  # Red
        elif log_entry.log_level == "WARNING":
            print(f"\033[93m{console_message}\033[0m")  # Yellow
        else:
            print(console_message)

    def get_metric_unit(self, metric_name: str) -> str:
        """„É°„Éà„É™„ÇØ„ÇπÂçò‰Ωç„ÅÆÊ±∫ÂÆö"""

        unit_mapping = {
            "_time": "seconds",
            "_count": "count",
            "_rate": "percentage",
            "_size": "bytes",
            "_score": "score",
            "_utilization": "percentage",
            "_latency": "milliseconds",
            "_throughput": "requests_per_second"
        }

        for suffix, unit in unit_mapping.items():
            if suffix in metric_name.lower():
                return unit

        return "value"

    def determine_error_severity(self, error_type: str) -> ErrorSeverity:
        """„Ç®„É©„ÉºÈáçË¶ÅÂ∫¶„ÅÆÂà§ÂÆö"""

        critical_errors = [
            "system_failure", "data_corruption", "security_breach",
            "service_unavailable", "critical_exception"
        ]

        high_errors = [
            "operation_failure", "timeout_error", "connection_failure",
            "authentication_failure", "authorization_denied"
        ]

        medium_errors = [
            "validation_error", "configuration_error", "resource_limit",
            "deprecated_usage", "performance_degradation"
        ]

        error_type_lower = error_type.lower()

        if any(critical in error_type_lower for critical in critical_errors):
            return ErrorSeverity.CRITICAL
        elif any(high in error_type_lower for high in high_errors):
            return ErrorSeverity.HIGH
        elif any(medium in error_type_lower for medium in medium_errors):
            return ErrorSeverity.MEDIUM
        else:
            return ErrorSeverity.LOW

    def generate_execution_id(self) -> str:
        """ÂÆüË°åIDÁîüÊàê"""
        return f"{self.agent_name}_exec_{datetime.datetime.now().strftime('%Y%m%d_%H%M%S_%f')}"

    def generate_error_id(self) -> str:
        """„Ç®„É©„ÉºIDÁîüÊàê"""
        return f"{self.agent_name}_err_{datetime.datetime.now().strftime('%Y%m%d_%H%M%S_%f')}"

    def _check_log_rotation(self, log_file_path: str):
        """„É≠„Ç∞„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥„ÉÅ„Çß„ÉÉ„ÇØ"""

        if os.path.exists(log_file_path):
            file_size = os.path.getsize(log_file_path)
            if file_size > self.max_log_file_size:
                self._rotate_log_file(log_file_path)

    def _rotate_log_file(self, log_file_path: str):
        """„É≠„Ç∞„Éï„Ç°„Ç§„É´„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥"""

        try:
            # „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Éï„Ç°„Ç§„É´ÂêçÁîüÊàê
            timestamp = datetime.datetime.now().strftime("%H%M%S")
            backup_path = f"{log_file_path}.{timestamp}.backup"

            # „Éï„Ç°„Ç§„É´ÁßªÂãï
            os.rename(log_file_path, backup_path)

            # Âè§„ÅÑ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Éï„Ç°„Ç§„É´ÂâäÈô§
            self._cleanup_old_log_files(os.path.dirname(log_file_path))

        except Exception as e:
            print(f"Log rotation failed for {log_file_path}: {str(e)}")

    def _cleanup_old_log_files(self, log_directory: str):
        """Âè§„ÅÑ„É≠„Ç∞„Éï„Ç°„Ç§„É´„ÅÆ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó"""

        try:
            import glob

            # .backup„Éï„Ç°„Ç§„É´„ÅÆ‰∏ÄË¶ßÂèñÂæó
            backup_files = glob.glob(f"{log_directory}/*.backup")
            backup_files.sort(key=os.path.getctime, reverse=True)

            # ‰∏äÈôê„ÇíË∂Ö„Åà„Åü„Éï„Ç°„Ç§„É´„ÇíÂâäÈô§
            if len(backup_files) > self.max_log_files:
                for old_file in backup_files[self.max_log_files:]:
                    os.remove(old_file)

        except Exception as e:
            print(f"Log cleanup failed for {log_directory}: {str(e)}")

    def _trigger_error_alert(self, error_report: ErrorReport):
        """ÈáçË¶Å„Ç®„É©„Éº„ÅÆ„Ç¢„É©„Éº„ÉàÈÄÅ‰ø°"""

        # „Ç¢„É©„Éº„ÉàÊ©üËÉΩ„ÅÆÂÆüË£ÖÔºàÂÆüË£Ö‰æùÂ≠òÔºâ
        alert_message = f"[{error_report.severity}] {self.agent_name}: {error_report.error_message}"
        print(f"üö® ALERT: {alert_message}")

        # Â∞ÜÊù•„ÅÆÊã°Âºµ: SlackÈÄöÁü•„ÄÅ„É°„Éº„É´ÈÄÅ‰ø°„ÄÅÁõ£Ë¶ñ„Ç∑„Çπ„ÉÜ„É†ÈÄ£Êê∫Á≠â

    def initialize_log_rotation(self):
        """„É≠„Ç∞„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥ÂàùÊúüÂåñ"""

        # Ëµ∑ÂãïÊôÇ„Å´Âè§„ÅÑ„É≠„Ç∞„Éï„Ç°„Ç§„É´„Çí„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó
        agent_log_dir = f"{self.log_base_path}/{self.agent_name}"
        if os.path.exists(agent_log_dir):
            for subdir in ["execution", "errors", "performance", "summary"]:
                subdir_path = os.path.join(agent_log_dir, subdir)
                if os.path.exists(subdir_path):
                    self._cleanup_old_log_files(subdir_path)

    def generate_daily_summary(self) -> Dict[str, Any]:
        """Êó•Ê¨°„Çµ„Éû„É™„Éº„É¨„Éù„Éº„ÉàÁîüÊàê"""

        summary = {
            "agent_name": self.agent_name,
            "date": datetime.datetime.now().strftime("%Y-%m-%d"),
            "session_id": self.session_id,
            "summary_timestamp": datetime.datetime.now().isoformat(),
            "log_statistics": self._calculate_log_statistics(),
            "performance_summary": self._generate_performance_summary(),
            "error_summary": self._generate_error_summary(),
            "top_events": self._identify_top_events()
        }

        # „Çµ„Éû„É™„Éº„Éï„Ç°„Ç§„É´Êõ∏„ÅçËæº„Åø
        self._write_daily_summary(summary)

        return summary

    def _calculate_log_statistics(self) -> Dict[str, int]:
        """„É≠„Ç∞Áµ±Ë®àË®àÁÆó"""

        # ÂÆüË£ÖÁ∞°Áï•Âåñ„ÅÆ„Åü„ÇÅÂü∫Êú¨Áµ±Ë®à„ÅÆ„Åø
        return {
            "total_events": 0,
            "info_events": 0,
            "warning_events": 0,
            "error_events": 0,
            "critical_events": 0
        }

    def _generate_performance_summary(self) -> Dict[str, Any]:
        """„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Çµ„Éû„É™„ÉºÁîüÊàê"""

        return {
            "average_execution_time": 0.0,
            "total_operations": 0,
            "success_rate": 0.0,
            "performance_trends": []
        }

    def _generate_error_summary(self) -> Dict[str, Any]:
        """„Ç®„É©„Éº„Çµ„Éû„É™„ÉºÁîüÊàê"""

        return {
            "total_errors": 0,
            "error_by_severity": {},
            "top_error_types": [],
            "resolution_rate": 0.0
        }

    def _identify_top_events(self) -> List[Dict[str, Any]]:
        """‰∏ªË¶Å„Ç§„Éô„É≥„ÉàÁâπÂÆö"""

        return []

    def _write_daily_summary(self, summary: Dict[str, Any]):
        """Êó•Ê¨°„Çµ„Éû„É™„ÉºÊõ∏„ÅçËæº„Åø"""

        date_str = datetime.datetime.now().strftime("%Y-%m-%d")
        summary_file_path = f"{self.log_base_path}/{self.agent_name}/summary/{date_str}-summary.json"

        try:
            with open(summary_file_path, "w", encoding="utf-8") as summary_file:
                json.dump(summary, summary_file, ensure_ascii=False, indent=2)
        except Exception as e:
            print(f"Failed to write daily summary: {str(e)}")

# ‰æøÂà©„Å™„Éá„Ç≥„É¨„Éº„ÇøÈñ¢Êï∞
def log_execution(logger: BaseAgentLogger, operation_name: str = None):
    """ÂÆüË°å„É≠„Ç∞„Éá„Ç≥„É¨„Éº„Çø"""
    def decorator(func):
        def wrapper(*args, **kwargs):
            op_name = operation_name or func.__name__
            execution_id = logger.log_execution_start(op_name, {"args": str(args), "kwargs": str(kwargs)})

            start_time = datetime.datetime.now()
            try:
                result = func(*args, **kwargs)
                execution_time = (datetime.datetime.now() - start_time).total_seconds()

                logger.log_execution_end(
                    execution_id, op_name, True,
                    {"result_type": type(result).__name__},
                    execution_time
                )

                return result

            except Exception as e:
                execution_time = (datetime.datetime.now() - start_time).total_seconds()

                logger.log_execution_end(
                    execution_id, op_name, False,
                    {"error": str(e)},
                    execution_time
                )

                logger.log_error_with_context(
                    "execution_exception",
                    str(e),
                    {"operation": op_name, "execution_id": execution_id}
                )

                raise

        return wrapper
    return decorator
```

## üîß **‰ΩøÁî®ÊñπÊ≥ï„ÉªÁ∂ôÊâø‰æã**

### **Âü∫Êú¨ÁöÑ„Å™‰ΩøÁî®ÊñπÊ≥ï**
```python
# „Ç®„Éº„Ç∏„Çß„É≥„ÉàÂàùÊúüÂåñÊôÇ
class MyAgent:
    def __init__(self):
        self.logger = BaseAgentLogger("my-agent")

    def perform_operation(self):
        # Êìç‰ΩúÈñãÂßã„É≠„Ç∞
        execution_id = self.logger.log_execution_start("data_processing", {"batch_size": 1000})

        try:
            # ‰Ωï„Çâ„Åã„ÅÆÂá¶ÁêÜ
            result = self.process_data()

            # ÊàêÂäü„É≠„Ç∞
            self.logger.log_execution_end(execution_id, "data_processing", True, {"processed": len(result)})

            # „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„É°„Éà„É™„ÇØ„Çπ
            self.logger.log_performance_metric("processing_throughput", len(result), {"batch_size": 1000})

            return result

        except Exception as e:
            # Â§±Êïó„É≠„Ç∞
            self.logger.log_execution_end(execution_id, "data_processing", False, {"error": str(e)})
            self.logger.log_error_with_context("processing_error", str(e), {"batch_size": 1000})
            raise

# „Éá„Ç≥„É¨„Éº„Çø‰ΩøÁî®‰æã
@log_execution(logger, "critical_operation")
def critical_function():
    # ÂÆüË£Ö...
    pass
```

### **„Ç´„Çπ„Çø„É†„É≠„Ç∞Ê©üËÉΩËøΩÂä†**
```python
class CustomAgentLogger(BaseAgentLogger):
    """„Ç´„Çπ„Çø„É†„Ç®„Éº„Ç∏„Çß„É≥„ÉàÁî®Logger"""

    def get_agent_specific_directories(self) -> List[str]:
        """„Ç´„Çπ„Çø„É†„Éá„Ç£„É¨„ÇØ„Éà„É™ËøΩÂä†"""
        return [
            f"{self.log_base_path}/{self.agent_name}/custom-category/",
            f"{self.log_base_path}/{self.agent_name}/business-events/"
        ]

    def log_business_event(self, event_name: str, event_data: Dict[str, Any]):
        """„Éì„Ç∏„Éç„Çπ„Ç§„Éô„É≥„ÉàÂ∞ÇÁî®„É≠„Ç∞"""
        self.log_structured_event(
            LogLevel.INFO,
            "business-events",
            "BUSINESS_EVENT",
            f"Business event: {event_name}",
            event_data=event_data
        )
```

## üìä **„É≠„Ç∞ÂàÜÊûê„ÉªÁõ£Ë¶ñÊ©üËÉΩ**

### **„É≠„Ç∞ÂàÜÊûê„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£**
```python
class LogAnalyzer:
    """„É≠„Ç∞ÂàÜÊûê„ÉªÁõ£Ë¶ñ„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£"""

    @staticmethod
    def analyze_agent_performance(agent_name: str, date_range: tuple) -> Dict[str, Any]:
        """„Ç®„Éº„Ç∏„Çß„É≥„Éà„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÂàÜÊûê"""
        # „Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„É≠„Ç∞„ÅÆËß£ÊûêÂÆüË£Ö
        pass

    @staticmethod
    def generate_error_trends(agent_name: str, days: int = 7) -> Dict[str, Any]:
        """„Ç®„É©„Éº„Éà„É¨„É≥„ÉâÂàÜÊûê"""
        # „Ç®„É©„Éº„É≠„Ç∞„ÅÆÂÇæÂêëÂàÜÊûêÂÆüË£Ö
        pass

    @staticmethod
    def create_system_dashboard_data() -> Dict[str, Any]:
        """„Ç∑„Çπ„ÉÜ„É†„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÁî®„Éá„Éº„ÇøÁîüÊàê"""
        # ÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„Éà„É≠„Ç∞„ÅÆÁµ±ÂêàÂàÜÊûêÂÆüË£Ö
        pass
```

## ‚öôÔ∏è **Ë®≠ÂÆö„Éª„Ç´„Çπ„Çø„Éû„Ç§„Ç∫**

### **„É≠„Ç∞Ë®≠ÂÆö**
```python
class LogConfig:
    # „Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫„Éª„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥
    MAX_LOG_FILE_SIZE = 10 * 1024 * 1024  # 10MB
    MAX_LOG_FILES = 30  # 30Êó•ÂàÜ

    # „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπË®≠ÂÆö
    FLUSH_INTERVAL = 5  # 5Áßí
    BATCH_SIZE = 100  # „Éê„ÉÉ„ÉÅÊõ∏„ÅçËæº„Åø

    # „Ç¢„É©„Éº„ÉàË®≠ÂÆö
    ENABLE_CONSOLE_ALERTS = True
    ENABLE_FILE_ALERTS = True
    CRITICAL_ERROR_NOTIFICATION = True
```

---

**BaseAgentLogger„Å´„Çà„Çä„ÄÅÂÖ®„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅßÁµ±‰∏Ä„Åï„Çå„ÅüÈ´òÂìÅË≥™„Å™„É≠„Ç∞ÁÆ°ÁêÜ„ÉªÂàÜÊûê„ÉªÁõ£Ë¶ñÊ©üËÉΩ„ÅåÊèê‰æõ„Åï„Çå„ÄÅ„Ç∑„Çπ„ÉÜ„É†ÂÖ®‰Ωì„ÅÆÈÅãÁî®ÂäπÁéá„Å®ÂïèÈ°åËß£Ê±∫ËÉΩÂäõ„ÅåÂ§ßÂπÖ„Å´Âêë‰∏ä„Åó„Åæ„Åô„ÄÇ**
